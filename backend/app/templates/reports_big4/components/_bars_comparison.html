{#
   Gráfico Barras Horizontales - Comparativa Localidades
   Estilo Big 4: Barras horizontales con porcentajes
   Variables: montevideo_pct, mercedes_pct, label (opcional)
#}
{% set mvd_pct = montevideo_pct | default(75) %}
{% set mer_pct = mercedes_pct | default(25) %}
{% set bar_height = 40 %}
{% set total_width = 520 %}

<div class="bars-comparison-container">
    <svg viewBox="0 0 {{ total_width }} {{ bar_height + 15 }}" class="bars-comparison">

        <!-- Fondo de la barra -->
        <rect x="10" y="20" width="{{ total_width - 20 }}" height="{{ bar_height }}" fill="#F7FAFC" rx="4"/>

        <!-- Barra Montevideo -->
        <rect x="10" y="20" width="{{ mvd_pct * 5 }}" height="{{ bar_height }}"
              fill="#1B365D" rx="4 0 0 4"/>

        <!-- Barra Mercedes (continúa desde donde termina MVD) -->
        <rect x="{{ 10 + mvd_pct * 5 }}" y="20" width="{{ mer_pct * 5 }}" height="{{ bar_height }}"
              fill="#D69E2E" rx="0 4 4 0"/>

        <!-- Línea divisoria -->
        <line x1="{{ 10 + mvd_pct * 5 }}" y1="16" x2="{{ 10 + mvd_pct * 5 }}" y2="{{ 24 + bar_height }}"
              stroke="white" stroke-width="2"/>

        <!-- Etiquetas dentro de las barras -->
        {% if mvd_pct > 15 %}
        <text x="{{ 10 + mvd_pct * 2.5 }}" y="{{ 20 + bar_height/2 + 5 }}"
              text-anchor="middle" class="bar-label" fill="white">
            Montevideo {{ mvd_pct | round(1) }}%
        </text>
        {% endif %}

        {% if mer_pct > 15 %}
        <text x="{{ 10 + mvd_pct * 5 + mer_pct * 2.5 }}" y="{{ 20 + bar_height/2 + 5 }}"
              text-anchor="middle" class="bar-label" fill="#1B365D">
            Mercedes {{ mer_pct | round(1) }}%
        </text>
        {% endif %}
    </svg>
</div>

<style>
.bars-comparison-container {
    width: 100%;
    max-width: 520px;
    margin: 15px auto;
}
.bars-comparison {
    width: 100%;
    height: auto;
}
.bars-comparison .bar-label {
    font-family: serif;
    font-size: 9px;
    font-weight: 600;
}
</style>



