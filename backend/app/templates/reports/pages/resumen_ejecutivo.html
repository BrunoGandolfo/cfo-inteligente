{# Página 2: Resumen Ejecutivo #}
{% include 'reports/components/header.html' %}

<div class="section">
    <h2 class="section-title">Resumen Ejecutivo</h2>
    
    {# Grid de métricas clave #}
    {% include 'reports/components/summary_grid.html' %}
    
    {# Highlights principales #}
    <div class="row">
        <div class="col-6">
            <div class="card">
                <h3 class="section-subtitle">Desempeño General</h3>
                <p class="mb-20">
                    Durante el período <strong>{{ period_label }}</strong>, la empresa registró:
                </p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>Ingresos totales: <strong class="text-primary">{{ ingresos_uyu | format_currency }}</strong></li>
                    <li>Gastos operativos: <strong>{{ gastos_uyu | format_currency }}</strong></li>
                    <li>Utilidad Neta: <strong class="text-success">{{ utilidad_neta_uyu | format_currency }}</strong></li>
                    <li>Rentabilidad Neta: <strong>{{ rentabilidad_neta | format_percentage }}</strong></li>
                </ul>
            </div>
        </div>
        
        <div class="col-6">
            <div class="card">
                <h3 class="section-subtitle">Área Líder</h3>
                <p class="mb-10">
                    <strong class="text-primary">{{ area_lider.nombre }}</strong> se destaca como el área con mayor contribución:
                </p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>Participación en ingresos: <strong>{{ area_lider.porcentaje | format_percentage }}</strong></li>
                    <li>Rentabilidad: <strong class="text-success">{{ area_lider.rentabilidad | format_percentage }}</strong></li>
                </ul>
            </div>
        </div>
    </div>
    
    {% if tiene_comparacion %}
    <div style="margin-top: 60px; padding: 40px; background: #F8F9FA; border-radius: 12px; border-left: 6px solid #4472C4;">
        <h3 style="font-size: 28px; font-weight: 700; color: #2B3E6B; margin-bottom: 30px;">Comparación con Período Anterior</h3>
        
        <table style="width: 100%; border-collapse: collapse; font-size: 18px;">
            <thead>
                <tr style="background: #4472C4; color: white;">
                    <th style="padding: 16px; text-align: left; font-weight: 600;">Métrica</th>
                    <th style="padding: 16px; text-align: right;">Período Anterior</th>
                    <th style="padding: 16px; text-align: right;">Período Actual</th>
                    <th style="padding: 16px; text-align: center; width: 150px;">Variación</th>
                </tr>
            </thead>
            <tbody>
                <tr style="background: white;">
                    <td style="padding: 16px; font-weight: 600;">Ingresos</td>
                    <td style="padding: 16px; text-align: right;">{{ (ingresos_uyu / (1 + variacion_mom_ingresos/100)) | format_currency if variacion_mom_ingresos else '—' }}</td>
                    <td style="padding: 16px; text-align: right; font-weight: 700;">{{ ingresos_uyu | format_currency }}</td>
                    <td style="padding: 16px; text-align: center;">
                        {% if variacion_mom_ingresos > 0 %}
                        <span style="color: #70AD47; font-weight: 700; font-size: 20px;">↗ {{ variacion_mom_ingresos | format_percentage }}%</span>
                        {% elif variacion_mom_ingresos < 0 %}
                        <span style="color: #E74C3C; font-weight: 700; font-size: 20px;">↘ {{ variacion_mom_ingresos | format_percentage }}%</span>
                        {% else %}
                        <span style="font-size: 20px;">→ 0%</span>
                        {% endif %}
                    </td>
                </tr>
                <tr style="background: #F8F9FA;">
                    <td style="padding: 16px; font-weight: 600;">Gastos</td>
                    <td style="padding: 16px; text-align: right;">{{ (gastos_uyu / (1 + variacion_mom_gastos/100)) | format_currency if variacion_mom_gastos else '—' }}</td>
                    <td style="padding: 16px; text-align: right; font-weight: 700;">{{ gastos_uyu | format_currency }}</td>
                    <td style="padding: 16px; text-align: center;">
                        {% if variacion_mom_gastos > 0 %}
                        <span style="color: #E74C3C; font-weight: 700; font-size: 20px;">↗ {{ variacion_mom_gastos | format_percentage }}%</span>
                        {% elif variacion_mom_gastos < 0 %}
                        <span style="color: #70AD47; font-weight: 700; font-size: 20px;">↘ {{ variacion_mom_gastos | format_percentage }}%</span>
                        {% else %}
                        <span style="font-size: 20px;">→ 0%</span>
                        {% endif %}
                    </td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 16px; font-weight: 600;">Rentabilidad Neta</td>
                    <td style="padding: 16px; text-align: right;">{{ (rentabilidad_neta - variacion_mom_rentabilidad) | format_percentage if variacion_mom_rentabilidad else '—' }}</td>
                    <td style="padding: 16px; text-align: right; font-weight: 700;">{{ rentabilidad_neta | format_percentage }}</td>
                    <td style="padding: 16px; text-align: center;">
                        {% if variacion_mom_rentabilidad > 0 %}
                        <span style="color: #70AD47; font-weight: 700; font-size: 20px;">↗ {{ variacion_mom_rentabilidad | format_percentage }}pp</span>
                        {% elif variacion_mom_rentabilidad < 0 %}
                        <span style="color: #E74C3C; font-weight: 700; font-size: 20px;">↘ {{ variacion_mom_rentabilidad | format_percentage }}pp</span>
                        {% else %}
                        <span style="font-size: 20px;">→ 0pp</span>
                        {% endif %}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    {% endif %}
</div>

<div class="page-break"></div>

