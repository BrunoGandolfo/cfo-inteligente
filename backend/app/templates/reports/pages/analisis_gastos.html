{# Página 5: Análisis de Gastos #}
{% include 'reports/components/header.html' %}

<div class="section">
    <h2 class="section-title">Análisis de Gastos</h2>
    
    {# Commentary narrativo #}
    <div class="card mb-20" style="background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); border-left: 4px solid var(--warning);">
        <p style="line-height: 1.8; color: var(--gray-800);">
            {{ expense_commentary }}
        </p>
    </div>
    
    {# Métricas de gastos #}
    <div class="row mb-30">
        <div class="col-4">
            <div class="metric-box">
                <div class="label">Total Gastos</div>
                <div class="value">{{ gastos_uyu | format_currency }}</div>
            </div>
        </div>
        <div class="col-4">
            <div class="metric-box">
                <div class="label">Ticket Promedio Gasto</div>
                <div class="value">{{ ticket_promedio_gasto | format_currency }}</div>
            </div>
        </div>
        <div class="col-4">
            <div class="metric-box">
                <div class="label">Cantidad de Gastos</div>
                <div class="value">{{ cantidad_gastos }}</div>
            </div>
        </div>
    </div>
    
    {# Distribución por área #}
    <h3 class="section-subtitle">Gastos por Área</h3>
    {% if gastos_por_area %}
    <table>
        <thead>
            <tr>
                <th>Área</th>
                <th class="text-right">Gastos</th>
                <th class="text-right">Porcentaje</th>
            </tr>
        </thead>
        <tbody>
            {% for item in gastos_por_area %}
            <tr>
                <td class="font-semibold">{{ item.nombre }}</td>
                <td class="text-right">{{ item.valor | format_currency }}</td>
                <td class="text-right">{{ item.porcentaje | format_percentage }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>

<div class="page-break"></div>
