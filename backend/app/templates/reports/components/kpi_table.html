{# Component: Tabla de KPIs con comparación #}
<table>
    <thead>
        <tr>
            <th>Métrica</th>
            <th class="text-right">Valor Actual</th>
            {% if tiene_comparacion %}
            <th class="text-right">Período Anterior</th>
            <th class="text-right">Variación</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for kpi in kpis %}
        <tr>
            <td class="font-semibold">{{ kpi.nombre }}</td>
            <td class="text-right">
                {% if kpi.tipo == 'currency' %}
                    {{ kpi.valor | format_currency }}
                {% elif kpi.tipo == 'percentage' %}
                    {{ kpi.valor | format_percentage }}
                {% else %}
                    {{ kpi.valor }}
                {% endif %}
            </td>
            {% if tiene_comparacion %}
            <td class="text-right text-muted">
                {% if kpi.tipo == 'currency' %}
                    {{ kpi.valor_anterior | format_currency }}
                {% elif kpi.tipo == 'percentage' %}
                    {{ kpi.valor_anterior | format_percentage }}
                {% else %}
                    {{ kpi.valor_anterior }}
                {% endif %}
            </td>
            <td class="text-right">
                {% if kpi.variacion %}
                    {% if kpi.variacion > 0 %}
                    <span class="badge badge-success">↗ {{ kpi.variacion | format_percentage }}</span>
                    {% elif kpi.variacion < 0 %}
                    <span class="badge badge-danger">↘ {{ kpi.variacion | format_percentage }}</span>
                    {% else %}
                    <span class="badge">→ 0%</span>
                    {% endif %}
                {% else %}
                    <span class="text-muted">-</span>
                {% endif %}
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>

